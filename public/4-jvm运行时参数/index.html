<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <title> - yanghx blog</title><meta name="Description" content="yanghx blog"><meta property="og:title" content="" />
<meta property="og:description" content="一、 JVM 运行时参数 1.1 JVM 参数选项官网地址：https://docs.oracle.com/javase/8/docs/technotes/too" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/" /><meta property="og:image" content="http://yanghx.vip/logo.png"/><meta property="article:section" content="posts" />

<meta property="og:site_name" content="yanghx blog" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://yanghx.vip/logo.png"/>

<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="一、 JVM 运行时参数 1.1 JVM 参数选项官网地址：https://docs.oracle.com/javase/8/docs/technotes/too"/>
<meta name="application-name" content="DoIt">
<meta name="apple-mobile-web-app-title" content="DoIt">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/" /><link rel="prev" href="http://yanghx.vip/5-%E5%88%86%E6%9E%90gc%E6%97%A5%E5%BF%97/" /><link rel="next" href="http://yanghx.vip/3-jvm%E7%9B%91%E6%8E%A7%E5%8F%8A%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7-gui/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/color.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/fontawesome-free/all.min.css">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/animate/animate.min.css">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/yanghx.vip\/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0\/"
        },"genre": "posts","wordcount":  5721 ,
        "url": "http:\/\/yanghx.vip\/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0\/","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "yanghx"
            },"description": ""
    }
    </script><script src="//instant.page/5.1.1" defer type="module" integrity="sha384-MWfCL6g1OTGsbSwfuMHc8+8J2u71/LA8dzlIN3ycajckxuZZmF+DNjdm7O6H3PSq"></script>
</head>

<body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark');}
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('auto' === 'light' || 'auto' === 'dark' || 'auto' === 'black') setTheme('auto'), saveTheme('auto'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="yanghx blog">yanghx blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/series/"> 系列 </a><a class="menu-item" href="/posts/mysql/mysql45/"> mysql45讲 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="#" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="#" class="menu-item theme-select" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                    <select class="color-theme-select" id="theme-select-desktop" title="切换主题">
                        <option value="light">浅色</option>
                        <option value="dark">深色</option>
                        <option value="black">黑色</option>
                        <option value="auto">跟随系统</option>
                    </select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="yanghx blog">yanghx blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="#" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/series/" title="">系列</a><a class="menu-item" href="/posts/mysql/mysql45/" title="">mysql45讲</a><a href="#" class="menu-item theme-select" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
                <select class="color-theme-select" id="theme-select-mobile" title="切换主题">
                    <option value="light">浅色</option>
                    <option value="dark">深色</option>
                    <option value="black">黑色</option>
                    <option value="auto">跟随系统</option>
                </select>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
            <div class="container"><div class="toc" id="toc-auto">
        <h2 class="toc-title">目录</h2>
        <div class="toc-content always-active" id="toc-content-auto"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#一-jvm-运行时参数">一、 JVM 运行时参数</a>
          <ul>
            <li><a href="#11-jvm-参数选项">1.1 JVM 参数选项</a>
              <ul>
                <li><a href="#111-类型一标准参数选项">1.1.1 类型一：标准参数选项</a></li>
                <li><a href="#112-类型二-x-参数选项">1.1.2 类型二：-X 参数选项</a></li>
                <li><a href="#113-类型三-xx-参数选项">1.1.3 类型三：-XX 参数选项</a></li>
              </ul>
            </li>
            <li><a href="#12-添加-jvm-参数选项">1.2 添加 JVM 参数选项</a></li>
            <li><a href="#13-常用的-jvm-参数选项">1.3. 常用的 JVM 参数选项</a>
              <ul>
                <li><a href="#131-打印设置的-xx-选项及值">1.3.1 打印设置的 XX 选项及值</a></li>
                <li><a href="#132-堆栈方法区等内存大小设置">1.3.2 堆、栈、方法区等内存大小设置</a></li>
                <li><a href="#133-outofmemory-相关的选项">1.3.3 OutOfMemory 相关的选项</a></li>
                <li><a href="#134-垃圾收集器相关选项">1.3.4 垃圾收集器相关选项</a></li>
                <li><a href="#135-gc-日志相关选项">1.3.5 GC 日志相关选项</a></li>
                <li><a href="#136-其他参数">1.3.6 其他参数</a></li>
              </ul>
            </li>
            <li><a href="#11-通过-java-代码获取-jvm-参数">1.1 通过 Java 代码获取 JVM 参数</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
    </div><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle", "normal")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC", "true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX"></h1><div class="post-meta">
            <div class="post-meta-line">
                <span class="post-author"><i class="author fas fa-user-circle fa-fw"></i><a href="/" title="Author" rel=" author" class="author">yanghx</a>
                </span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="0001-01-01">0001-01-01</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="0001-01-01">0001-01-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 5721 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 12 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#一-jvm-运行时参数">一、 JVM 运行时参数</a>
          <ul>
            <li><a href="#11-jvm-参数选项">1.1 JVM 参数选项</a>
              <ul>
                <li><a href="#111-类型一标准参数选项">1.1.1 类型一：标准参数选项</a></li>
                <li><a href="#112-类型二-x-参数选项">1.1.2 类型二：-X 参数选项</a></li>
                <li><a href="#113-类型三-xx-参数选项">1.1.3 类型三：-XX 参数选项</a></li>
              </ul>
            </li>
            <li><a href="#12-添加-jvm-参数选项">1.2 添加 JVM 参数选项</a></li>
            <li><a href="#13-常用的-jvm-参数选项">1.3. 常用的 JVM 参数选项</a>
              <ul>
                <li><a href="#131-打印设置的-xx-选项及值">1.3.1 打印设置的 XX 选项及值</a></li>
                <li><a href="#132-堆栈方法区等内存大小设置">1.3.2 堆、栈、方法区等内存大小设置</a></li>
                <li><a href="#133-outofmemory-相关的选项">1.3.3 OutOfMemory 相关的选项</a></li>
                <li><a href="#134-垃圾收集器相关选项">1.3.4 垃圾收集器相关选项</a></li>
                <li><a href="#135-gc-日志相关选项">1.3.5 GC 日志相关选项</a></li>
                <li><a href="#136-其他参数">1.3.6 其他参数</a></li>
              </ul>
            </li>
            <li><a href="#11-通过-java-代码获取-jvm-参数">1.1 通过 Java 代码获取 JVM 参数</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h3 id="一-jvm-运行时参数" class="headerLink">
    <a href="#%e4%b8%80-jvm-%e8%bf%90%e8%a1%8c%e6%97%b6%e5%8f%82%e6%95%b0" class="header-mark"></a>一、 JVM 运行时参数</h3><h4 id="11-jvm-参数选项" class="headerLink">
    <a href="#11-jvm-%e5%8f%82%e6%95%b0%e9%80%89%e9%a1%b9" class="header-mark"></a>1.1 JVM 参数选项</h4><p>官网地址：<a href="https://gitee.com/link?target=https%3A%2F%2Fdocs.oracle.com%2Fjavase%2F8%2Fdocs%2Ftechnotes%2Ftools%2Fwindows%2Fjava.html" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html</a></p>
<h5 id="111-类型一标准参数选项" class="headerLink">
    <a href="#111-%e7%b1%bb%e5%9e%8b%e4%b8%80%e6%a0%87%e5%87%86%e5%8f%82%e6%95%b0%e9%80%89%e9%a1%b9" class="header-mark"></a>1.1.1 类型一：标准参数选项</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">&gt;</span> <span class="n">java</span> <span class="o">-</span><span class="n">help</span>
</span></span><span class="line"><span class="cl"><span class="err">用法</span><span class="o">:</span> <span class="n">java</span> <span class="o">[-</span><span class="n">options</span><span class="o">]</span> <span class="kd">class</span> <span class="err">[</span><span class="nc">args</span><span class="o">...]</span>
</span></span><span class="line"><span class="cl">           <span class="o">(</span><span class="err">执行类</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">   <span class="err">或</span>  <span class="n">java</span> <span class="o">[-</span><span class="n">options</span><span class="o">]</span> <span class="o">-</span><span class="n">jar</span> <span class="n">jarfile</span> <span class="o">[</span><span class="n">args</span><span class="o">...]</span>
</span></span><span class="line"><span class="cl">           <span class="o">(</span><span class="err">执行</span> <span class="n">jar</span> <span class="err">文件</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="err">其中选项包括</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">d32</span>          <span class="err">使用</span> <span class="mi">32</span> <span class="err">位数据模型</span> <span class="o">(</span><span class="err">如果可用</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">d61</span>          <span class="err">使用</span> <span class="mi">61</span> <span class="err">位数据模型</span> <span class="o">(</span><span class="err">如果可用</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">server</span>       <span class="err">选择</span> <span class="s">&#34;server&#34;</span> <span class="n">VM</span>
</span></span><span class="line"><span class="cl">                  <span class="err">默认</span> <span class="n">VM</span> <span class="err">是</span> <span class="n">server</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">cp</span> <span class="o">&lt;</span><span class="err">目录和</span> <span class="n">zip</span><span class="o">/</span><span class="n">jar</span> <span class="err">文件的类搜索路径</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">classpath</span> <span class="o">&lt;</span><span class="err">目录和</span> <span class="n">zip</span><span class="o">/</span><span class="n">jar</span> <span class="err">文件的类搜索路径</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="err">用</span> <span class="o">;</span> <span class="err">分隔的目录</span><span class="o">,</span> <span class="n">JAR</span> <span class="err">档案</span>
</span></span><span class="line"><span class="cl">                  <span class="err">和</span> <span class="n">ZIP</span> <span class="err">档案列表</span><span class="o">,</span> <span class="err">用于搜索类文件。</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">D</span><span class="o">&lt;</span><span class="err">名称</span><span class="o">&gt;=&lt;</span><span class="err">值</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="err">设置系统属性</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">verbose</span><span class="o">:[</span><span class="n">class</span><span class="o">|</span><span class="n">gc</span><span class="o">|</span><span class="n">jni</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">                  <span class="err">启用详细输出</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">version</span>      <span class="err">输出产品版本并退出</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">version</span><span class="o">:&lt;</span><span class="err">值</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="err">警告</span><span class="o">:</span> <span class="err">此功能已过时</span><span class="o">,</span> <span class="err">将在</span>
</span></span><span class="line"><span class="cl">                  <span class="err">未来发行版中删除。</span>
</span></span><span class="line"><span class="cl">                  <span class="err">需要指定的版本才能运行</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">showversion</span>  <span class="err">输出产品版本并继续</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">jre</span><span class="o">-</span><span class="n">restrict</span><span class="o">-</span><span class="n">search</span> <span class="o">|</span> <span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">jre</span><span class="o">-</span><span class="n">restrict</span><span class="o">-</span><span class="n">search</span>
</span></span><span class="line"><span class="cl">                  <span class="err">警告</span><span class="o">:</span> <span class="err">此功能已过时</span><span class="o">,</span> <span class="err">将在</span>
</span></span><span class="line"><span class="cl">                  <span class="err">未来发行版中删除。</span>
</span></span><span class="line"><span class="cl">                  <span class="err">在版本搜索中包括</span><span class="o">/</span><span class="err">排除用户专用</span> <span class="n">JRE</span>
</span></span><span class="line"><span class="cl">    <span class="o">-?</span> <span class="o">-</span><span class="n">help</span>      <span class="err">输出此帮助消息</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">X</span>            <span class="err">输出非标准选项的帮助</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">ea</span><span class="o">[:&lt;</span><span class="n">packagename</span><span class="o">&gt;...|:&lt;</span><span class="n">classname</span><span class="o">&gt;]</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">enableassertions</span><span class="o">[:&lt;</span><span class="n">packagename</span><span class="o">&gt;...|:&lt;</span><span class="n">classname</span><span class="o">&gt;]</span>
</span></span><span class="line"><span class="cl">                  <span class="err">按指定的粒度启用断言</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">da</span><span class="o">[:&lt;</span><span class="n">packagename</span><span class="o">&gt;...|:&lt;</span><span class="n">classname</span><span class="o">&gt;]</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">disableassertions</span><span class="o">[:&lt;</span><span class="n">packagename</span><span class="o">&gt;...|:&lt;</span><span class="n">classname</span><span class="o">&gt;]</span>
</span></span><span class="line"><span class="cl">                  <span class="err">禁用具有指定粒度的断言</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">esa</span> <span class="o">|</span> <span class="o">-</span><span class="n">enablesystemassertions</span>
</span></span><span class="line"><span class="cl">                  <span class="err">启用系统断言</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">dsa</span> <span class="o">|</span> <span class="o">-</span><span class="n">disablesystemassertions</span>
</span></span><span class="line"><span class="cl">                  <span class="err">禁用系统断言</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">agentlib</span><span class="o">:&lt;</span><span class="n">libname</span><span class="o">&gt;[=&lt;</span><span class="err">选项</span><span class="o">&gt;]</span>
</span></span><span class="line"><span class="cl">                  <span class="err">加载本机代理库</span> <span class="o">&lt;</span><span class="n">libname</span><span class="o">&gt;,</span> <span class="err">例如</span> <span class="o">-</span><span class="n">agentlib</span><span class="o">:</span><span class="n">hprof</span>
</span></span><span class="line"><span class="cl">                  <span class="err">另请参阅</span> <span class="o">-</span><span class="n">agentlib</span><span class="o">:</span><span class="n">jdwp</span><span class="o">=</span><span class="n">help</span> <span class="err">和</span> <span class="o">-</span><span class="n">agentlib</span><span class="o">:</span><span class="n">hprof</span><span class="o">=</span><span class="n">help</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">agentpath</span><span class="o">:&lt;</span><span class="n">pathname</span><span class="o">&gt;[=&lt;</span><span class="err">选项</span><span class="o">&gt;]</span>
</span></span><span class="line"><span class="cl">                  <span class="err">按完整路径名加载本机代理库</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">javaagent</span><span class="o">:&lt;</span><span class="n">jarpath</span><span class="o">&gt;[=&lt;</span><span class="err">选项</span><span class="o">&gt;]</span>
</span></span><span class="line"><span class="cl">                  <span class="err">加载</span> <span class="n">Java</span> <span class="err">编程语言代理</span><span class="o">,</span> <span class="err">请参阅</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">instrument</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">splash</span><span class="o">:&lt;</span><span class="n">imagepath</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="err">使用指定的图像显示启动屏幕</span>
</span></span><span class="line"><span class="cl"><span class="err">有关详细信息</span><span class="o">,</span> <span class="err">请参阅</span> <span class="n">http</span><span class="o">:</span><span class="c1">//www.oracle.com/technetwork/java/javase/documentation/index.html。
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Server 模式和 Client 模式</strong></p>
<p>Hotspot JVM 有两种模式，分别是 server 和 client，分别通过-server 和-client 模式设置</p>
<ul>
<li>32 位系统上，默认使用 Client 类型的 JVM。要想使用 Server 模式，机器配置至少有 2 个以上的 CPU 和 2G 以上的物理内存。client 模式适用于对内存要求较小的桌面应用程序，默认使用 Serial 串行垃圾收集器</li>
<li>61 位系统上，只支持 server 模式的 JVM，适用于需要大内存的应用程序，默认使用并行垃圾收集器</li>
</ul>
<p>官网地址：<a href="https://gitee.com/link?target=https%3A%2F%2Fdocs.oracle.com%2Fjavase%2F8%2Fdocs%2Ftechnotes%2Fguides%2Fvm%2Fserver-class.html" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/javase/8/docs/technotes/guides/vm/server-class.html</a></p>
<p>如何知道系统默认使用的是那种模式呢？</p>
<p>通过 java -version 命令：可以看到 Server VM 字样，代表当前系统使用是 Server 模式</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">&gt;</span> <span class="n">java</span> <span class="o">-</span><span class="n">version</span>
</span></span><span class="line"><span class="cl"><span class="n">java</span> <span class="n">version</span> <span class="s">&#34;1.8.0_201&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">Java</span><span class="o">(</span><span class="n">TM</span><span class="o">)</span> <span class="n">SE</span> <span class="n">Runtime</span> <span class="nf">Environment</span> <span class="o">(</span><span class="n">build</span> <span class="mf">1.8.0_201</span><span class="o">-</span><span class="n">b09</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Java</span> <span class="nf">HotSpot</span><span class="o">(</span><span class="n">TM</span><span class="o">)</span> <span class="mi">61</span><span class="o">-</span><span class="n">Bit</span> <span class="n">Server</span> <span class="nf">VM</span> <span class="o">(</span><span class="n">build</span> <span class="mf">25.201</span><span class="o">-</span><span class="n">b09</span><span class="o">,</span> <span class="n">mixed</span> <span class="n">mode</span><span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="112-类型二-x-参数选项" class="headerLink">
    <a href="#112-%e7%b1%bb%e5%9e%8b%e4%ba%8c-x-%e5%8f%82%e6%95%b0%e9%80%89%e9%a1%b9" class="header-mark"></a>1.1.2 类型二：-X 参数选项</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">&gt;</span> <span class="n">java</span> <span class="o">-</span><span class="n">X</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xmixed</span>           <span class="err">混合模式执行</span> <span class="o">(</span><span class="err">默认</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xint</span>             <span class="err">仅解释模式执行</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xbootclasspath</span><span class="o">:&lt;</span><span class="err">用</span> <span class="o">;</span> <span class="err">分隔的目录和</span> <span class="n">zip</span><span class="o">/</span><span class="n">jar</span> <span class="err">文件</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                      <span class="err">设置搜索路径以引导类和资源</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xbootclasspath</span><span class="o">/</span><span class="n">a</span><span class="o">:&lt;</span><span class="err">用</span> <span class="o">;</span> <span class="err">分隔的目录和</span> <span class="n">zip</span><span class="o">/</span><span class="n">jar</span> <span class="err">文件</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                      <span class="err">附加在引导类路径末尾</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xbootclasspath</span><span class="o">/</span><span class="n">p</span><span class="o">:&lt;</span><span class="err">用</span> <span class="o">;</span> <span class="err">分隔的目录和</span> <span class="n">zip</span><span class="o">/</span><span class="n">jar</span> <span class="err">文件</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                      <span class="err">置于引导类路径之前</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xdiag</span>            <span class="err">显示附加诊断消息</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xnoclassgc</span>       <span class="err">禁用类垃圾收集</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xincgc</span>           <span class="err">启用增量垃圾收集</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xloggc</span><span class="o">:&lt;</span><span class="n">file</span><span class="o">&gt;</span>    <span class="err">将</span> <span class="n">GC</span> <span class="err">状态记录在文件中</span> <span class="o">(</span><span class="err">带时间戳</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xbatch</span>           <span class="err">禁用后台编译</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xms</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span>        <span class="err">设置初始</span> <span class="n">Java</span> <span class="err">堆大小</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xmx</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span>        <span class="err">设置最大</span> <span class="n">Java</span> <span class="err">堆大小</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xss</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span>        <span class="err">设置</span> <span class="n">Java</span> <span class="err">线程堆栈大小</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xprof</span>            <span class="err">输出</span> <span class="n">cpu</span> <span class="err">配置文件数据</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xfuture</span>          <span class="err">启用最严格的检查</span><span class="o">,</span> <span class="err">预期将来的默认值</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xrs</span>              <span class="err">减少</span> <span class="n">Java</span><span class="o">/</span><span class="n">VM</span> <span class="err">对操作系统信号的使用</span> <span class="o">(</span><span class="err">请参阅文档</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xcheck</span><span class="o">:</span><span class="n">jni</span>       <span class="err">对</span> <span class="n">JNI</span> <span class="err">函数执行其他检查</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xshare</span><span class="o">:</span><span class="n">off</span>       <span class="err">不尝试使用共享类数据</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xshare</span><span class="o">:</span><span class="n">auto</span>      <span class="err">在可能的情况下使用共享类数据</span> <span class="o">(</span><span class="err">默认</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">Xshare</span><span class="o">:</span><span class="n">on</span>        <span class="err">要求使用共享类数据</span><span class="o">,</span> <span class="err">否则将失败。</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">XshowSettings</span>    <span class="err">显示所有设置并继续</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">XshowSettings</span><span class="o">:</span><span class="n">all</span>
</span></span><span class="line"><span class="cl">                      <span class="err">显示所有设置并继续</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">XshowSettings</span><span class="o">:</span><span class="n">vm</span> <span class="err">显示所有与</span> <span class="n">vm</span> <span class="err">相关的设置并继续</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">XshowSettings</span><span class="o">:</span><span class="n">properties</span>
</span></span><span class="line"><span class="cl">                      <span class="err">显示所有属性设置并继续</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">XshowSettings</span><span class="o">:</span><span class="n">locale</span>
</span></span><span class="line"><span class="cl">                      <span class="err">显示所有与区域设置相关的设置并继续</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">X</span> <span class="err">选项是非标准选项</span><span class="o">,</span> <span class="err">如有更改</span><span class="o">,</span> <span class="err">恕不另行通知。</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>如何知道 JVM 默认使用的是混合模式呢？</p>
<p>同样地，通过 java -version 命令：可以看到 mixed mode 字样，代表当前系统使用的是混合模式</p>
<h5 id="113-类型三-xx-参数选项" class="headerLink">
    <a href="#113-%e7%b1%bb%e5%9e%8b%e4%b8%89-xx-%e5%8f%82%e6%95%b0%e9%80%89%e9%a1%b9" class="header-mark"></a>1.1.3 类型三：-XX 参数选项</h5><p><strong>Boolean 类型格式</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+&lt;</span><span class="n">option</span><span class="o">&gt;</span>  <span class="err">启用</span><span class="n">option</span><span class="err">属性</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:-&lt;</span><span class="n">option</span><span class="o">&gt;</span>  <span class="err">禁用</span><span class="n">option</span><span class="err">属性</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>非 Boolean 类型格式</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:&lt;</span><span class="n">option</span><span class="o">&gt;=&lt;</span><span class="n">number</span><span class="o">&gt;</span>  <span class="err">设置</span><span class="n">option</span><span class="err">数值，可以带单位如</span><span class="n">k</span><span class="o">/</span><span class="n">K</span><span class="o">/</span><span class="n">m</span><span class="o">/</span><span class="n">M</span><span class="o">/</span><span class="n">g</span><span class="o">/</span><span class="n">G</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:&lt;</span><span class="n">option</span><span class="o">&gt;=&lt;</span><span class="n">string</span><span class="o">&gt;</span>  <span class="err">设置</span><span class="n">option</span><span class="err">字符值</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="12-添加-jvm-参数选项" class="headerLink">
    <a href="#12-%e6%b7%bb%e5%8a%a0-jvm-%e5%8f%82%e6%95%b0%e9%80%89%e9%a1%b9" class="header-mark"></a>1.2 添加 JVM 参数选项</h4><p>eclipse 和 idea 中配置不必多说，在 Run Configurations 中 VM Options 中配置即可，大同小异</p>
<p><strong>运行 jar 包</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">java</span> <span class="o">-</span><span class="n">Xms100m</span> <span class="o">-</span><span class="n">Xmx100m</span> <span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCDetails</span> <span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCDateStamps</span> <span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCTimeStamps</span> <span class="o">-</span><span class="n">jar</span> <span class="n">demo</span><span class="o">.</span><span class="na">jar</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Tomcat 运行 war 包</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">#</span> <span class="n">linux</span><span class="err">下</span><span class="n">catalina</span><span class="o">.</span><span class="na">sh</span><span class="err">添加</span>
</span></span><span class="line"><span class="cl"><span class="n">JAVA_OPTS</span><span class="o">=</span><span class="s">&#34;-Xms512M -Xmx1024M&#34;</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="n">windows</span><span class="err">下</span><span class="n">catalina</span><span class="o">.</span><span class="na">bat</span><span class="err">添加</span>
</span></span><span class="line"><span class="cl"><span class="n">set</span> <span class="s">&#34;JAVA_OPTS=-Xms512M -Xmx1024M&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>程序运行中</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">#</span> <span class="err">设置</span><span class="n">Boolean</span><span class="err">类型参数</span>
</span></span><span class="line"><span class="cl"><span class="n">jinfo</span> <span class="o">-</span><span class="n">flag</span> <span class="o">[+|-]&lt;</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">pid</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="err">设置非</span><span class="n">Boolean</span><span class="err">类型参数</span>
</span></span><span class="line"><span class="cl"><span class="n">jinfo</span> <span class="o">-</span><span class="n">flag</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;=&lt;</span><span class="n">value</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">pid</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="13-常用的-jvm-参数选项" class="headerLink">
    <a href="#13-%e5%b8%b8%e7%94%a8%e7%9a%84-jvm-%e5%8f%82%e6%95%b0%e9%80%89%e9%a1%b9" class="header-mark"></a>1.3. 常用的 JVM 参数选项</h4><h5 id="131-打印设置的-xx-选项及值" class="headerLink">
    <a href="#131-%e6%89%93%e5%8d%b0%e8%ae%be%e7%bd%ae%e7%9a%84-xx-%e9%80%89%e9%a1%b9%e5%8f%8a%e5%80%bc" class="header-mark"></a>1.3.1 打印设置的 XX 选项及值</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintCommandLineFlags</span> <span class="err">程序运行时</span><span class="n">JVM</span><span class="err">默认设置或用户手动设置的</span><span class="n">XX</span><span class="err">选项</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintFlagsInitial</span> <span class="err">打印所有</span><span class="n">XX</span><span class="err">选项的默认值</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintFlagsFinal</span> <span class="err">打印所有</span><span class="n">XX</span><span class="err">选项的实际值</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintVMOptions</span> <span class="err">打印</span><span class="n">JVM</span><span class="err">的参数</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="132-堆栈方法区等内存大小设置" class="headerLink">
    <a href="#132-%e5%a0%86%e6%a0%88%e6%96%b9%e6%b3%95%e5%8c%ba%e7%ad%89%e5%86%85%e5%ad%98%e5%a4%a7%e5%b0%8f%e8%ae%be%e7%bd%ae" class="header-mark"></a>1.3.2 堆、栈、方法区等内存大小设置</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">#</span> <span class="err">栈</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">Xss128k</span> <span class="o">&lt;==&gt;</span> <span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">ThreadStackSize</span><span class="o">=</span><span class="mi">128</span><span class="n">k</span> <span class="err">设置线程栈的大小为</span><span class="mi">128</span><span class="n">K</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="err">堆</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">Xms2018m</span> <span class="o">&lt;==&gt;</span> <span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">InitialHeapSize</span><span class="o">=</span><span class="mi">2018</span><span class="n">m</span> <span class="err">设置</span><span class="n">JVM</span><span class="err">初始堆内存为</span><span class="mi">2018</span><span class="n">M</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">Xmx2018m</span> <span class="o">&lt;==&gt;</span> <span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">MaxHeapSize</span><span class="o">=</span><span class="mi">2018</span><span class="n">m</span> <span class="err">设置</span><span class="n">JVM</span><span class="err">最大堆内存为</span><span class="mi">2018</span><span class="n">M</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">Xmn2g</span> <span class="o">&lt;==&gt;</span> <span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">NewSize</span><span class="o">=</span><span class="mi">2</span><span class="n">g</span> <span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">MaxNewSize</span><span class="o">=</span><span class="mi">2</span><span class="n">g</span> <span class="err">设置年轻代大小为</span><span class="mi">2</span><span class="n">G</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">SurvivorRatio</span><span class="o">=</span><span class="mi">8</span> <span class="err">设置</span><span class="n">Eden</span><span class="err">区与</span><span class="n">Survivor</span><span class="err">区的比值，默认为</span><span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">NewRatio</span><span class="o">=</span><span class="mi">2</span> <span class="err">设置老年代与年轻代的比例，默认为</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseAdaptiveSizePolicy</span> <span class="err">设置大小比例自适应，默认开启</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">PretenureSizeThreadshold</span><span class="o">=</span><span class="mi">1024</span> <span class="err">设置让大于此阈值的对象直接分配在老年代，只对</span><span class="n">Serial</span><span class="err">、</span><span class="n">ParNew</span><span class="err">收集器有效</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">MaxTenuringThreshold</span><span class="o">=</span><span class="mi">15</span> <span class="err">设置新生代晋升老年代的年龄限制，默认为</span><span class="mi">15</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">TargetSurvivorRatio</span> <span class="err">设置</span><span class="n">MinorGC</span><span class="err">结束后</span><span class="n">Survivor</span><span class="err">区占用空间的期望比例</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="err">方法区</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">MetaspaceSize</span> <span class="o">/</span> <span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">PermSize</span><span class="o">=</span><span class="mi">256</span><span class="n">m</span> <span class="err">设置元空间</span><span class="o">/</span><span class="err">永久代初始值为</span><span class="mi">256</span><span class="n">M</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">MaxMetaspaceSize</span> <span class="o">/</span> <span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">MaxPermSize</span><span class="o">=</span><span class="mi">256</span><span class="n">m</span> <span class="err">设置元空间</span><span class="o">/</span><span class="err">永久代最大值为</span><span class="mi">256</span><span class="n">M</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseCompressedOops</span> <span class="err">使用压缩对象</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseCompressedClassPointers</span> <span class="err">使用压缩类指针</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">CompressedClassSpaceSize</span> <span class="err">设置</span><span class="n">Klass</span> <span class="n">Metaspace</span><span class="err">的大小，默认</span><span class="mi">1</span><span class="n">G</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="err">直接内存</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">MaxDirectMemorySize</span> <span class="err">指定</span><span class="n">DirectMemory</span><span class="err">容量，默认等于</span><span class="n">Java</span><span class="err">堆最大值</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="133-outofmemory-相关的选项" class="headerLink">
    <a href="#133-outofmemory-%e7%9b%b8%e5%85%b3%e7%9a%84%e9%80%89%e9%a1%b9" class="header-mark"></a>1.3.3 OutOfMemory 相关的选项</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">-XX:+HeapDumpOnOutMemoryError 内存出现OOM时生成Heap转储文件，两者互斥
</span></span><span class="line"><span class="cl">-XX:+HeapDumpBeforeFullGC 出现FullGC时生成Heap转储文件，两者互斥
</span></span><span class="line"><span class="cl">-XX:HeapDumpPath=&lt;path&gt; 指定heap转储文件的存储路径，默认当前目录
</span></span><span class="line"><span class="cl">-XX:OnOutOfMemoryError=&lt;path&gt; 指定可行性程序或脚本的路径，当发生OOM时执行脚本
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="134-垃圾收集器相关选项" class="headerLink">
    <a href="#134-%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8%e7%9b%b8%e5%85%b3%e9%80%89%e9%a1%b9" class="header-mark"></a>1.3.4 垃圾收集器相关选项</h5><p>首先需了解垃圾收集器之间的搭配使用关系</p>
<ul>
<li>红色虚线表示在 jdk8 时被 Deprecate，jdk9 时被删除</li>
<li>绿色虚线表示在 jdk11 时被 Deprecate</li>
<li>绿色虚框表示在 jdk9 时被 Deprecate，jdk11 时被删除</li>
</ul>
<p><a class="lightgallery" href="https://blog-1257196793.cos.ap-beijing.myqcloud.com/46dec5b346fcc5b147491481787ea8ec.png" title="image-20210506182458663" data-thumbnail="https://blog-1257196793.cos.ap-beijing.myqcloud.com/46dec5b346fcc5b147491481787ea8ec.png">
        <img
            
            loading="lazy"
            src="https://blog-1257196793.cos.ap-beijing.myqcloud.com/46dec5b346fcc5b147491481787ea8ec.png"
            srcset="https://blog-1257196793.cos.ap-beijing.myqcloud.com/46dec5b346fcc5b147491481787ea8ec.png, https://blog-1257196793.cos.ap-beijing.myqcloud.com/46dec5b346fcc5b147491481787ea8ec.png 1.5x, https://blog-1257196793.cos.ap-beijing.myqcloud.com/46dec5b346fcc5b147491481787ea8ec.png 2x"
            sizes="auto"
            alt="https://blog-1257196793.cos.ap-beijing.myqcloud.com/46dec5b346fcc5b147491481787ea8ec.png">
    </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">#</span> <span class="n">Serial</span><span class="err">回收器</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseSerialGC</span>  <span class="err">年轻代使用</span><span class="n">Serial</span> <span class="n">GC</span><span class="err">，</span> <span class="err">老年代使用</span><span class="n">Serial</span> <span class="n">Old</span> <span class="n">GC</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="n">ParNew</span><span class="err">回收器</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseParNewGC</span>  <span class="err">年轻代使用</span><span class="n">ParNew</span> <span class="n">GC</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">ParallelGCThreads</span>  <span class="err">设置年轻代并行收集器的线程数。</span>
</span></span><span class="line"><span class="cl">	<span class="err">一般地，最好与</span><span class="n">CPU</span><span class="err">数量相等，以避免过多的线程数影响垃圾收集性能。</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ParallelGCThreads={CPUCount(CPUCount&lt;=8) 3+(5∗CPU＿Count/8)(CPUCount&gt;8)ParallelGCThreads={CPUCount(CPUCount&lt;=8) 3+(5∗CPU＿Count/8)(CPUCount&gt;8)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">#</span> <span class="n">Parallel</span><span class="err">回收器</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseParallelGC</span>  <span class="err">年轻代使用</span> <span class="n">Parallel</span> <span class="n">Scavenge</span> <span class="n">GC</span><span class="err">，互相激活</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseParallelOldGC</span>  <span class="err">老年代使用</span> <span class="n">Parallel</span> <span class="n">Old</span> <span class="n">GC</span><span class="err">，互相激活</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">ParallelGCThreads</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">MaxGCPauseMillis</span>  <span class="err">设置垃圾收集器最大停顿时间（即</span><span class="n">STW</span><span class="err">的时间），单位是毫秒。</span>
</span></span><span class="line"><span class="cl">	<span class="err">为了尽可能地把停顿时间控制在</span><span class="n">MaxGCPauseMills</span><span class="err">以内，收集器在工作时会调整</span><span class="n">Java</span><span class="err">堆大小或者其他一些参数。</span>
</span></span><span class="line"><span class="cl">	<span class="err">对于用户来讲，停顿时间越短体验越好；但是服务器端注重高并发，整体的吞吐量。</span>
</span></span><span class="line"><span class="cl">	<span class="err">所以服务器端适合</span><span class="n">Parallel</span><span class="err">，进行控制。该参数使用需谨慎。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">GCTimeRatio</span>  <span class="err">垃圾收集时间占总时间的比例（</span><span class="mi">1</span> <span class="o">/</span> <span class="o">(</span><span class="n">N</span><span class="err">＋</span><span class="mi">1</span><span class="o">)</span><span class="err">），用于衡量吞吐量的大小</span>
</span></span><span class="line"><span class="cl">	<span class="err">取值范围（</span><span class="mi">0</span><span class="o">,</span><span class="mi">100</span><span class="err">），默认值</span><span class="mi">99</span><span class="err">，也就是垃圾回收时间不超过</span><span class="mi">1</span><span class="err">％。</span>
</span></span><span class="line"><span class="cl">	<span class="err">与前一个</span><span class="o">-</span><span class="n">XX</span><span class="err">：</span><span class="n">MaxGCPauseMillis</span><span class="err">参数有一定矛盾性。暂停时间越长，</span><span class="n">Radio</span><span class="err">参数就容易超过设定的比例。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseAdaptiveSizePolicy</span>  <span class="err">设置</span><span class="n">Parallel</span> <span class="n">Scavenge</span><span class="err">收集器具有自适应调节策略。</span>
</span></span><span class="line"><span class="cl">	<span class="err">在这种模式下，年轻代的大小、</span><span class="n">Eden</span><span class="err">和</span><span class="n">Survivor</span><span class="err">的比例、晋升老年代的对象年龄等参数会被自动调整，以达到在堆大小、吞吐量和停顿时间之间的平衡点。</span>
</span></span><span class="line"><span class="cl">	<span class="err">在手动调优比较困难的场合，可以直接使用这种自适应的方式，仅指定虚拟机的最大堆、目标的吞吐量（</span><span class="n">GCTimeRatio</span><span class="err">）和停顿时间（</span><span class="n">MaxGCPauseMills</span><span class="err">），让虚拟机自己完成调优工作。</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="n">CMS</span><span class="err">回收器</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseConcMarkSweepGC</span>  <span class="err">年轻代使用</span><span class="n">CMS</span> <span class="n">GC</span><span class="err">。</span>
</span></span><span class="line"><span class="cl">	<span class="err">开启该参数后会自动将</span><span class="o">-</span><span class="n">XX</span><span class="err">：＋</span><span class="n">UseParNewGC</span><span class="err">打开。即：</span><span class="n">ParNew</span><span class="err">（</span><span class="n">Young</span><span class="err">区）</span><span class="o">+</span> <span class="n">CMS</span><span class="err">（</span><span class="n">Old</span><span class="err">区）</span><span class="o">+</span> <span class="n">Serial</span> <span class="n">Old</span><span class="err">的组合</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">CMSInitiatingOccupanyFraction</span>  <span class="err">设置堆内存使用率的阈值，一旦达到该阈值，便开始进行回收。</span><span class="n">JDK5</span><span class="err">及以前版本的默认值为</span><span class="mi">68</span><span class="err">，</span><span class="n">DK6</span><span class="err">及以上版本默认值为</span><span class="mi">92</span><span class="err">％。</span>
</span></span><span class="line"><span class="cl">	<span class="err">如果内存增长缓慢，则可以设置一个稍大的值，大的阈值可以有效降低</span><span class="n">CMS</span><span class="err">的触发频率，减少老年代回收的次数可以较为明显地改善应用程序性能。</span>
</span></span><span class="line"><span class="cl">	<span class="err">反之，如果应用程序内存使用率增长很快，则应该降低这个阈值，以避免频繁触发老年代串行收集器。</span>
</span></span><span class="line"><span class="cl">	<span class="err">因此通过该选项便可以有效降低</span><span class="n">Fu1l</span> <span class="n">GC</span><span class="err">的执行次数。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseCMSInitiatingOccupancyOnly</span>  <span class="err">是否动态可调，使</span><span class="n">CMS</span><span class="err">一直按</span><span class="n">CMSInitiatingOccupancyFraction</span><span class="err">设定的值启动</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseCMSCompactAtFullCollection</span>  <span class="err">用于指定在执行完</span><span class="n">Full</span> <span class="n">GC</span><span class="err">后对内存空间进行压缩整理</span>
</span></span><span class="line"><span class="cl">	<span class="err">以此避免内存碎片的产生。不过由于内存压缩整理过程无法并发执行，所带来的问题就是停顿时间变得更长了。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">CMSFullGCsBeforeCompaction</span>  <span class="err">设置在执行多少次</span><span class="n">Full</span> <span class="n">GC</span><span class="err">后对内存空间进行压缩整理。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">ParallelCMSThreads</span>  <span class="err">设置</span><span class="n">CMS</span><span class="err">的线程数量。</span>
</span></span><span class="line"><span class="cl">	<span class="n">CMS</span> <span class="err">默认启动的线程数是</span><span class="o">(</span><span class="n">ParallelGCThreads</span><span class="err">＋</span><span class="mi">3</span><span class="o">)/</span><span class="mi">1</span><span class="err">，</span><span class="n">ParallelGCThreads</span> <span class="err">是年轻代并行收集器的线程数。</span>
</span></span><span class="line"><span class="cl">	<span class="err">当</span><span class="n">CPU</span> <span class="err">资源比较紧张时，受到</span><span class="n">CMS</span><span class="err">收集器线程的影响，应用程序的性能在垃圾回收阶段可能会非常糟糕。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">ConcGCThreads</span>  <span class="err">设置并发垃圾收集的线程数，默认该值是基于</span><span class="n">ParallelGCThreads</span><span class="err">计算出来的</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">CMSScavengeBeforeRemark</span>  <span class="err">强制</span><span class="n">hotspot</span><span class="err">在</span><span class="n">cms</span> <span class="n">remark</span><span class="err">阶段之前做一次</span><span class="n">minor</span> <span class="n">gc</span><span class="err">，用于提高</span><span class="n">remark</span><span class="err">阶段的速度</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">CMSClassUnloadingEnable</span>  <span class="err">如果有的话，启用回收</span><span class="n">Perm</span> <span class="err">区（</span><span class="n">JDK8</span><span class="err">之前）</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">CMSParallelInitialEnabled</span>  <span class="err">用于开启</span><span class="n">CMS</span> <span class="n">initial</span><span class="o">-</span><span class="n">mark</span><span class="err">阶段采用多线程的方式进行标记</span>
</span></span><span class="line"><span class="cl">	<span class="err">用于提高标记速度，在</span><span class="n">Java8</span><span class="err">开始已经默认开启</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">CMSParallelRemarkEnabled</span>  <span class="err">用户开启</span><span class="n">CMS</span> <span class="n">remark</span><span class="err">阶段采用多线程的方式进行重新标记，默认开启</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">ExplicitGCInvokesConcurrent</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">ExplicitGCInvokesConcurrentAndUnloadsClasses</span>
</span></span><span class="line"><span class="cl">	<span class="err">这两个参数用户指定</span><span class="n">hotspot</span><span class="err">虚拟在执行</span><span class="n">System</span><span class="o">.</span><span class="na">gc</span><span class="o">()</span><span class="err">时使用</span><span class="n">CMS</span><span class="err">周期</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">CMSPrecleaningEnabled</span>  <span class="err">指定</span><span class="n">CMS</span><span class="err">是否需要进行</span><span class="n">Pre</span> <span class="n">cleaning</span><span class="err">阶段</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="n">G1</span><span class="err">回收器</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseG1GC</span> <span class="err">手动指定使用</span><span class="n">G1</span><span class="err">收集器执行内存回收任务。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">G1HeapRegionSize</span> <span class="err">设置每个</span><span class="n">Region</span><span class="err">的大小。</span>
</span></span><span class="line"><span class="cl">	<span class="err">值是</span><span class="mi">2</span><span class="err">的幂，范围是</span><span class="mi">1</span><span class="n">MB</span><span class="err">到</span><span class="mi">32</span><span class="n">MB</span><span class="err">之间，目标是根据最小的</span><span class="n">Java</span><span class="err">堆大小划分出约</span><span class="mi">2018</span><span class="err">个区域。默认是堆内存的</span><span class="mi">1</span><span class="o">/</span><span class="mi">2000</span><span class="err">。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">MaxGCPauseMillis</span>  <span class="err">设置期望达到的最大</span><span class="n">GC</span><span class="err">停顿时间指标（</span><span class="n">JVM</span><span class="err">会尽力实现，但不保证达到）。默认值是</span><span class="mi">200</span><span class="n">ms</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">ParallelGCThread</span>  <span class="err">设置</span><span class="n">STW</span><span class="err">时</span><span class="n">GC</span><span class="err">线程数的值。最多设置为</span><span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">ConcGCThreads</span>  <span class="err">设置并发标记的线程数。将</span><span class="n">n</span><span class="err">设置为并行垃圾回收线程数（</span><span class="n">ParallelGCThreads</span><span class="err">）的</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="err">左右。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">InitiatingHeapOccupancyPercent</span> <span class="err">设置触发并发</span><span class="n">GC</span><span class="err">周期的</span><span class="n">Java</span><span class="err">堆占用率阈值。超过此值，就触发</span><span class="n">GC</span><span class="err">。默认值是</span><span class="mi">15</span><span class="err">。</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">G1NewSizePercent</span>  <span class="err">新生代占用整个堆内存的最小百分比（默认</span><span class="mi">5</span><span class="err">％）</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">G1MaxNewSizePercent</span>  <span class="err">新生代占用整个堆内存的最大百分比（默认</span><span class="mi">60</span><span class="err">％）</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">G1ReservePercent</span><span class="o">=</span><span class="mi">10</span>  <span class="err">保留内存区域，防止</span> <span class="n">to</span> <span class="n">space</span><span class="err">（</span><span class="n">Survivor</span><span class="err">中的</span><span class="n">to</span><span class="err">区）溢出</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>怎么选择垃圾回收器？</p>
<ul>
<li>优先让 JVM 自适应，调整堆的大小</li>
<li>串行收集器：内存小于 100M；单核、单机程序，并且没有停顿时间的要求</li>
<li>并行收集器：多 CPU、高吞吐量、允许停顿时间超过 1 秒</li>
<li>并发收集器：多 CPU、追求低停顿时间、快速响应（比如延迟不能超过 1 秒，如互联网应用）</li>
<li>官方推荐 G1，性能高。现在互联网的项目，基本都是使用 G1</li>
</ul>
<p>特别说明：</p>
<ul>
<li>没有最好的收集器，更没有万能的收集器</li>
<li>调优永远是针对特定场景、特定需求，不存在一劳永逸的收集器</li>
</ul>
<h5 id="135-gc-日志相关选项" class="headerLink">
    <a href="#135-gc-%e6%97%a5%e5%bf%97%e7%9b%b8%e5%85%b3%e9%80%89%e9%a1%b9" class="header-mark"></a>1.3.5 GC 日志相关选项</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGC</span> <span class="o">&lt;==&gt;</span> <span class="o">-</span><span class="n">verbose</span><span class="o">:</span><span class="n">gc</span>  <span class="err">打印简要日志信息</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCDetails</span>            <span class="err">打印详细日志信息</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCTimeStamps</span>  <span class="err">打印程序启动到</span><span class="n">GC</span><span class="err">发生的时间，搭配</span><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCDetails</span><span class="err">使用</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCDateStamps</span>  <span class="err">打印</span><span class="n">GC</span><span class="err">发生时的时间戳，搭配</span><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCDetails</span><span class="err">使用</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintHeapAtGC</span>  <span class="err">打印</span><span class="n">GC</span><span class="err">前后的堆信息，如下图</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">Xloggc</span><span class="o">:&lt;</span><span class="n">file</span><span class="o">&gt;</span> <span class="err">输出</span><span class="n">GC</span><span class="err">导指定路径下的文件中</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://blog-1257196793.cos.ap-beijing.myqcloud.com/9f323dd9b55235ed0a33e6a0af8adbca.png" title="image-20210506195156935" data-thumbnail="https://blog-1257196793.cos.ap-beijing.myqcloud.com/9f323dd9b55235ed0a33e6a0af8adbca.png">
        <img
            
            loading="lazy"
            src="https://blog-1257196793.cos.ap-beijing.myqcloud.com/9f323dd9b55235ed0a33e6a0af8adbca.png"
            srcset="https://blog-1257196793.cos.ap-beijing.myqcloud.com/9f323dd9b55235ed0a33e6a0af8adbca.png, https://blog-1257196793.cos.ap-beijing.myqcloud.com/9f323dd9b55235ed0a33e6a0af8adbca.png 1.5x, https://blog-1257196793.cos.ap-beijing.myqcloud.com/9f323dd9b55235ed0a33e6a0af8adbca.png 2x"
            sizes="auto"
            alt="https://blog-1257196793.cos.ap-beijing.myqcloud.com/9f323dd9b55235ed0a33e6a0af8adbca.png">
    </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">TraceClassLoading</span>  <span class="err">监控类的加载</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCApplicationStoppedTime</span>  <span class="err">打印</span><span class="n">GC</span><span class="err">时线程的停顿时间</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintGCApplicationConcurrentTime</span>  <span class="err">打印垃圾收集之前应用未中断的执行时间</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintReferenceGC</span> <span class="err">打印回收了多少种不同引用类型的引用</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintTenuringDistribution</span>  <span class="err">打印</span><span class="n">JVM</span><span class="err">在每次</span><span class="n">MinorGC</span><span class="err">后当前使用的</span><span class="n">Survivor</span><span class="err">中对象的年龄分布</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseGCLogFileRotation</span> <span class="err">启用</span><span class="n">GC</span><span class="err">日志文件的自动转储</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">NumberOfGCLogFiles</span><span class="o">=</span><span class="mi">1</span>  <span class="err">设置</span><span class="n">GC</span><span class="err">日志文件的循环数目</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">GCLogFileSize</span><span class="o">=</span><span class="mi">1</span><span class="n">M</span>  <span class="err">设置</span><span class="n">GC</span><span class="err">日志文件的大小</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="136-其他参数" class="headerLink">
    <a href="#136-%e5%85%b6%e4%bb%96%e5%8f%82%e6%95%b0" class="header-mark"></a>1.3.6 其他参数</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">DisableExplicitGC</span>  <span class="err">禁用</span><span class="n">hotspot</span><span class="err">执行</span><span class="n">System</span><span class="o">.</span><span class="na">gc</span><span class="o">()</span><span class="err">，默认禁用</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">ReservedCodeCacheSize</span><span class="o">=&lt;</span><span class="n">n</span><span class="o">&gt;[</span><span class="n">g</span><span class="o">|</span><span class="n">m</span><span class="o">|</span><span class="n">k</span><span class="o">]</span><span class="err">、</span><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">InitialCodeCacheSize</span><span class="o">=&lt;</span><span class="n">n</span><span class="o">&gt;[</span><span class="n">g</span><span class="o">|</span><span class="n">m</span><span class="o">|</span><span class="n">k</span><span class="o">]</span>  <span class="err">指定代码缓存的大小</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseCodeCacheFlushing</span>  <span class="err">放弃一些被编译的代码，避免代码缓存被占满时</span><span class="n">JVM</span><span class="err">切换到</span><span class="n">interpreted</span><span class="o">-</span><span class="n">only</span><span class="err">的情况</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">DoEscapeAnalysis</span>  <span class="err">开启逃逸分析</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseBiasedLocking</span>  <span class="err">开启偏向锁</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">UseLargePages</span>  <span class="err">开启使用大页面</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:+</span><span class="n">PrintTLAB</span>  <span class="err">打印</span><span class="n">TLAB</span><span class="err">的使用情况</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="o">:</span><span class="n">TLABSize</span>  <span class="err">设置</span><span class="n">TLAB</span><span class="err">大小</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="11-通过-java-代码获取-jvm-参数" class="headerLink">
    <a href="#11-%e9%80%9a%e8%bf%87-java-%e4%bb%a3%e7%a0%81%e8%8e%b7%e5%8f%96-jvm-%e5%8f%82%e6%95%b0" class="header-mark"></a>1.1 通过 Java 代码获取 JVM 参数</h4><p>Java 提供了 java.lang.management 包用于监视和管理 Java 虚拟机和 Java 运行时中的其他组件，它允许本地或远程监控和管理运行的 Java 虚拟机。其中 ManagementFactory 类较为常用，另外 Runtime 类可获取内存、CPU 核数等相关的数据。通过使用这些 api，可以监控应用服务器的堆内存使用情况，设置一些阈值进行报警等处理。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemoryMonitor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">MemoryMXBean</span> <span class="n">memorymbean</span> <span class="o">=</span> <span class="n">ManagementFactory</span><span class="o">.</span><span class="na">getMemoryMXBean</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">MemoryUsage</span> <span class="n">usage</span> <span class="o">=</span> <span class="n">memorymbean</span><span class="o">.</span><span class="na">getHeapMemoryUsage</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;INIT HEAP: &#34;</span> <span class="o">+</span> <span class="n">usage</span><span class="o">.</span><span class="na">getInit</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">+</span> <span class="s">&#34;m&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;MAX HEAP: &#34;</span> <span class="o">+</span> <span class="n">usage</span><span class="o">.</span><span class="na">getMax</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">+</span> <span class="s">&#34;m&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;USE HEAP: &#34;</span> <span class="o">+</span> <span class="n">usage</span><span class="o">.</span><span class="na">getUsed</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">+</span> <span class="s">&#34;m&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;\nFull Information:&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Heap Memory Usage: &#34;</span> <span class="o">+</span> <span class="n">memorymbean</span><span class="o">.</span><span class="na">getHeapMemoryUsage</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Non-Heap Memory Usage: &#34;</span> <span class="o">+</span> <span class="n">memorymbean</span><span class="o">.</span><span class="na">getNonHeapMemoryUsage</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;=======================通过java来获取相关系统状态============================ &#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;当前堆内存大小totalMemory &#34;</span> <span class="o">+</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">totalMemory</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">+</span> <span class="s">&#34;m&#34;</span><span class="o">);</span><span class="c1">// 当前堆内存大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;空闲堆内存大小freeMemory &#34;</span> <span class="o">+</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">freeMemory</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">+</span> <span class="s">&#34;m&#34;</span><span class="o">);</span><span class="c1">// 空闲堆内存大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;最大可用总堆内存maxMemory &#34;</span> <span class="o">+</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">maxMemory</span><span class="o">()</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">+</span> <span class="s">&#34;m&#34;</span><span class="o">);</span><span class="c1">// 最大可用总堆内存大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>

        

<div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 0001-01-01</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span><a class="link-to-mardown" href=/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/index.md target="_blank" rel="noopener noreferrer">阅读原始文档</a>
                    </span></div>
            <div class="post-info-share">
                <span><a href="#" title="分享到 Twitter" data-sharer="twitter" data-url="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/" data-title="" data-via="xxxx"><i class="fab fa-twitter fa-fw"></i></a><a href="#" title="分享到 Facebook" data-sharer="facebook" data-url="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="#" title="分享到 WhatsApp" data-sharer="whatsapp" data-url="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/" data-title="" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="#" title="分享到 Line" data-sharer="line" data-url="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/" data-title=""><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="#" title="分享到 微博" data-sharer="weibo" data-url="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/" data-title=""><i class="fab fa-weibo fa-fw"></i></a><a href="#" title="分享到 Myspace" data-sharer="myspace" data-url="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/" data-title="" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="#" title="分享到 Blogger" data-sharer="blogger" data-url="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/" data-title="" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="#" title="分享到 Evernote" data-sharer="evernote" data-url="http://yanghx.vip/4-jvm%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/" data-title=""><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/5-%E5%88%86%E6%9E%90gc%E6%97%A5%E5%BF%97/" class="prev" rel="prev" title=""><i class="fas fa-angle-left fa-fw"></i></a>
            <a href="/3-jvm%E7%9B%91%E6%8E%A7%E5%8F%8A%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7-gui/" class="next" rel="next" title=""><i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"></div></article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">
                    由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.111.3">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreferrer" title="DoIt 0.3.0"><i class="far fa-edit fa-fw"></i> DoIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank" rel="noopener noreferrer">yanghx</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp"><a target="_blank" href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11011502006407">京公安备11011502006407</a>  <a  target="_blank" href="https://beian.miit.gov.cn/">京ICP备2023005717号-1</a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div></footer></div>

    <div id="fixed-buttons"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="回到顶部">
            <i class="fas fa-arrow-up fa-fw"></i>
        </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
            <i class="fas fa-comment fa-fw"></i>
        </a>
    </div><div id="cookieconsent-container"></div><div class="assets"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/katex/copy-tex.min.css">
        <noscript><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"></noscript><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":0.3,"type":"fuse","useExtendedSearch":false},"sharerjs":true,"table":{"sort":true}};</script><script type="text/javascript" src="/lib/tablesort/tablesort.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js" defer></script><script type="text/javascript" src="/lib/katex/auto-render.min.js" defer></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js" defer></script><script type="text/javascript" src="/lib/katex/mhchem.min.js" defer></script><script type="text/javascript" src="/js/katex.min.js" defer></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script type="text/javascript" src="/js/cookieconsent.min.js" defer></script><script type="text/javascript" src="/js/theme.min.js" defer></script></div>
</body>

</html>